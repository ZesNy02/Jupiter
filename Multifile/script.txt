// ==UserScript==
// @name         Chatbox
// @namespace    http://tampermonkey.net/
// @version      2024-04-21
// @author       You
// @description  Chatbot for the Proophboard
// @match        https://*.prooph-board.com/inspectio/board/*
// @icon         https://www.google.com/s2/favicons?sz=64&domain=prooph-board.com
// @grant        GM_xmlhttpRequest
// ==/UserScript==

const scripts = [
    'https://zesny02.github.io/Jupiter/Multifile/chatButton.js'
];

let scriptsLoaded = 0;

function loadScript(url) {
    console.log("Lade " + url);
    GM_xmlhttpRequest({
        method: 'GET',
        url: url,
        onload: function(response) {
            if (response.status === 200) {
                const script = document.createElement('script');
                script.textContent = response.responseText;
                document.head.appendChild(script);
                scriptsLoaded++;
                if (scriptsLoaded === scripts.length) {
                    // All scripts have been loaded, now you can use the functions
                    window.onload = () => {
                        document.body.appendChild(unsafeWindow.makeChatButton());
                        //document.body.appendChild(makeChatWindow());
                        // ... and so on ...
                    };
                }
            }
        }
    });
}

scripts.forEach(loadScript);